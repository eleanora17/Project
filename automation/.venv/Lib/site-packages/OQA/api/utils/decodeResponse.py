from requests import Response

class resDescription:
    def __init__(self):
        self.success = True
        self.faliure = False
        self.rawData = {}
        self.description = ""

    def setSuccess(self,value: bool):
         self.success = value
         self.faliure = not value

def decodeResponse(response, option=["status_code","json"]):
    Data = {}

    for field in dir(response):
        if field in option:
            if field =='json':
                Data[field]=response.json() if response.text else None
            else:
                Data[field]= getattr(response, field)

    return Data

def getData(response:Response):
        _resDescription = resDescription()
        try:
            response.raise_for_status()
            _resDescription.setSuccess(True)
            _resDescription.rawData = decodeResponse(response)
            _resDescription.description = "Request Completed Successfully"
            return _resDescription.__dict__
        except Exception as e:
            _resDescription.setSuccess(False)
            _resDescription.rawData = decodeResponse(response)
            _resDescription.description = e.args[0]
            return _resDescription.__dict__