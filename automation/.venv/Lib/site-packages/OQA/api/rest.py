import requests
from . import data_append
from .utils import decodeResponse


def get(base_url, headers=None, timeout=30):
    res = requests.get(base_url, headers=headers, timeout=timeout)
    data = decodeResponse.getData(res)
    data['response_time'] = (res.elapsed.total_seconds())*1000
    data_append(base_url, data)
    return data

def post(base_url, headers=None, data=None, json=None, files=None ,timeout=30):
    res = requests.post(base_url,headers=headers, data=data, json=json, timeout=timeout, files=files)
    data = decodeResponse.getData(res)
    data['response_time'] = (res.elapsed.total_seconds())*1000
    data_append(base_url, data)
    return data

def patch(base_url, headers=None, data=None, json=None, timeout=30):
    res = requests.patch(base_url, headers=headers, data=data, json=json, timeout=timeout)
    data = decodeResponse.getData(res)
    data_append(base_url, data)
    data['response_time'] = (res.elapsed.total_seconds())*1000
    return data

def delete(base_url, headers=None, timeout=30):
    res = requests.delete(base_url, headers=headers, timeout=timeout)
    data = decodeResponse.getData(res)
    data['response_time'] = (res.elapsed.total_seconds())*1000
    data_append(base_url, data)
    return data


